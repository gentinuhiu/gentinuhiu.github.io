<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vocabulary Dash â€” Easy Learning</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
<nav class="navbar">
  <div class="container navbar-container">
    <h1 class="logo">Easy Learning ðŸ¤–</h1>
    <input type="checkbox" id="menu-toggle"/>
    <label for="menu-toggle" class="hamburger">&#9776;</label>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="task1.html">Live Room</a></li>
      <li><a class="active" href="task2.html">Vocabulary Dash</a></li>
      <li><a href="task3.html">AI Pronunciation Coach</a></li>
    </ul>
  </div>
</nav>

<section class="container card shadow" style="margin:24px auto">
  <div class="toolbar">
    <h2>Vocabulary Dash</h2>
    <div class="badge" title="Points youâ€™ve earned so far">Points: <span id="points">0</span></div>
  </div>

  <p class="hint">Drag each word to the matching picture. Click <strong>Start</strong> to begin.</p>

  <div class="toolbar">
    <div class="countdown" style="flex:1;max-width:420px"><div id="fill" class="fill"></div></div>
    <div id="timeLabel" class="badge">â€”</div>
    <div style="display:flex;gap:8px">
      <button id="startBtn" class="btn"><i class="fa-solid fa-play"></i> Start</button>
      <button id="restartBtn" class="btn ghost" disabled><i class="fa-solid fa-rotate-right"></i> Restart</button>
      <a href="index.html" class="btn secondary"><i class="fa-solid fa-house"></i> Home</a>
    </div>
  </div>

  <div class="columns">
    <div id="words" class="list"></div>
    <div id="images" class="list"></div>
  </div>

  <div id="result" class="card" style="display:none;margin-top:12px">
    <h3>Round Results</h3>
    <p class="small">Correct: <span id="correctCount">0</span>/10</p>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="playAgain" class="btn"><i class="fa-solid fa-rotate-right"></i> Play Again</button>
      <a href="index.html" class="btn secondary">Back to Home</a>
    </div>
  </div>
</section>

<div class="footer"><div class="container">&copy; 2025 Easy Learning AI.</div></div>

<script>
const WORDS = ["Apple","Car","Dog","Sun","Tree","Chair","Fish","Phone","Book","Shoe"];
const makeWord = (w)=>{const d=document.createElement('div');d.className='draggable';d.draggable=true;d.textContent=w;return d;};
const makeDrop = (w)=>{const d=document.createElement('div');d.className='droppable';d.dataset.word=w;const img=document.createElement('img');img.src='images/'+w.toLowerCase()+'.jpg';img.alt=w;img.style.width='120px';img.style.height='120px';img.style.objectFit='cover';d.appendChild(img);return d;};

const wordsEl = document.getElementById('words');
const imagesEl = document.getElementById('images');
const startBtn = document.getElementById('startBtn');
const restartBtn = document.getElementById('restartBtn');
const playAgain = document.getElementById('playAgain');
const result = document.getElementById('result');
const correctCountEl = document.getElementById('correctCount');
const timeLabel = document.getElementById('timeLabel');
const fill = document.getElementById('fill');
const pointsEl = document.getElementById('points');

let currentDrag=null, matches=0, time=0, timer=null, points=0, started=false;

function resetBoard(){
  wordsEl.innerHTML=''; imagesEl.innerHTML='';
  // Shuffle
  const shuffled = [...WORDS].sort(()=>Math.random()-0.5);
  shuffled.forEach(w=>wordsEl.appendChild(makeWord(w)));
  // Keep targets in view (no fold issue)
  const targets = [...WORDS].sort(()=>Math.random()-0.5);
  targets.forEach(w=>imagesEl.appendChild(makeDrop(w)));
  enableDnD(false);
  matches=0; result.style.display='none';
  timeLabel.textContent='â€”'; fill.style.width='100%'; fill.style.background='var(--accent)';
  started=false; startBtn.disabled=false; restartBtn.disabled=true;
}
function enableDnD(enabled){
  wordsEl.querySelectorAll('.draggable').forEach(el=>el.draggable=enabled);
  imagesEl.querySelectorAll('.droppable').forEach(el=>{
    if(enabled){
      el.addEventListener('dragover', onOver);
      el.addEventListener('drop', onDrop);
      el.addEventListener('dragenter', ()=>el.classList.add('highlight'));
      el.addEventListener('dragleave', ()=>el.classList.remove('highlight'));
    }
  });
  wordsEl.querySelectorAll('.draggable').forEach(el=>{
    if(enabled){
      el.addEventListener('dragstart', ()=>currentDrag=el);
    }
  });
}
function onOver(e){e.preventDefault();}
function onDrop(e){
  e.preventDefault();
  const drop=e.currentTarget;
  const word=currentDrag.textContent.trim();
  drop.classList.remove('highlight');
  if(word===drop.dataset.word){
    drop.appendChild(currentDrag);
    currentDrag.setAttribute('draggable','false');
    currentDrag.style.cursor='default';
    matches++; points += 10; pointsEl.textContent=points;
    if(matches===WORDS.length){ endGame(); }
  }else{
    currentDrag.classList.add('buzz'); setTimeout(()=>currentDrag.classList.remove('buzz'),180);
  }
}
// Auto-scroll while dragging near edges
document.addEventListener('dragover',(e)=>{
  const margin=40, speed=10;
  if(e.clientY < margin) window.scrollBy(0,-speed);
  if(window.innerHeight - e.clientY < margin) window.scrollBy(0,speed);
});

function startGame(){
  if(started) return;
  started=true;
  time=120; startBtn.disabled=true; restartBtn.disabled=false;
  enableDnD(true);
  timer=setInterval(()=>{
    time--;
    const pct=(time/120)*100;
    fill.style.width=pct+'%';
    if(time<=30) fill.style.background='var(--warning)';
    timeLabel.textContent=time+'s';
    if(time<=0){ endGame(); }
  },1000);
}
function endGame(){
  clearInterval(timer);
  enableDnD(false);
  timeLabel.textContent = Math.max(0,time)+'s';
  correctCountEl.textContent = matches;
  result.style.display='block';
}
startBtn.addEventListener('click', startGame);
restartBtn.addEventListener('click', resetBoard);
playAgain.addEventListener('click', resetBoard);

resetBoard();
</script>
</body>
</html>
